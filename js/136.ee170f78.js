"use strict";(self["webpackChunksad"]=self["webpackChunksad"]||[]).push([[136],{136:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});a(3373);var n=a(9412),i=a.n(n),s=a(3396),l=a(7139),o=a(4870),d=a(2483),r=a(9147),p=a(695),u=a(6796),y=a(7647),c=a(5554),m=a(6695);const b={class:"box-style fluidity-box"},g={class:"gradient-label-box"},w={class:"gradient-label"},f={class:"total-pledge"},v={class:"pledge-title"},T={class:"pledge-info"},C={class:"income-rate"},_={class:"pledge-title"},F={class:"pledge-info"},A={class:"income-rate"},k={class:"pledge-title"},x={class:"pledge-info"},h={class:"input-box"},z={class:"income-rate"},S={class:"pledge-title"},M={class:"pledge-info"},D={class:"button-box"},$={class:"my-income"},P={class:"pledge-title"},N={class:"pledge-info"},B={class:"button-box function-button-box"};var I={__name:"SADStaking",setup(e){const{proxy:t}=(0,s.FN)(),a=(0,d.yj)(),n=(0,o.iH)(0),I=(0,o.qj)({stakingContractAddress:"0x5b6020703Aa79703674C14Ea25286e368A440fd1",stakingContract:null,sadContractAddress:"0xD795CaC8d9265A1f8c630b3f4F1C16EabaD2bFF7",sadContract:null,totalPledge:0,rewardRate:0,myPledge:0,sadBalance:0,myIncome:0,pledgeNumber:0});(0,s.YP)((()=>a.account),(()=>{E(),q()})),(0,s.bv)((async()=>{I.stakingContract=new u.CH(I.stakingContractAddress,r,t.$provider.getSigner()),I.sadContract=new u.CH(I.sadContractAddress,p,t.$provider.getSigner()),R(),E(),O(),V(),q()}));const R=()=>{n.value=window.setInterval((async()=>{V(),q()}),3e3)},j=()=>{window.clearInterval(n.value)};(0,s.Ah)((()=>{j()}));const V=async()=>{const e=await I.stakingContract.totalSupply();I.totalPledge=parseFloat(y.dF(e))},O=async()=>{const e=await I.stakingContract.rewardRate();I.rewardRate=e/100},q=async()=>{const e=await I.stakingContract.balanceOf(a.account);I.myPledge=parseFloat(y.dF(e));const t=await I.sadContract.balanceOf(a.account);I.sadBalance=parseFloat(y.dF(t));const n=await I.stakingContract.rewards(a.account);I.myIncome=parseFloat(y.dF(n))},E=async()=>{const e=await I.sadContract.allowance(a.account,I.stakingContractAddress);e.eq(c.Bz)?a.isSADAuthorize=!0:a.isSADAuthorize=!1},H=()=>{I.pledgeNumber=I.sadBalance},Z=async()=>{I.pledgeNumber>I.sadBalance?i().fail(m.Z.global.t("toast.insufficientBalance")):parseFloat(I.pledgeNumber)>0?J():i().fail(m.Z.global.t("toast.inputError"))},J=async()=>{if(a.isSADAuthorize){i().loading();const e=await I.stakingContract.stake(y.fi(I.pledgeNumber.toString()));e.wait(),I.pledgeNumber=0,V(),q()}else{i().loading();const e=await I.sadContract.approve(I.stakingContractAddress,c.Bz);e.wait(),a.isSADAuthorize=!0,J()}},U=async()=>{if(I.myPledge>0){i().loading();const e=await I.stakingContract.exit();e.wait()}},W=async()=>{if(I.myIncome>0){i().loading();const e=await I.stakingContract.getReward();e.wait(),q()}};return(e,t)=>{const a=(0,s.up)("van-field");return(0,s.wg)(),(0,s.iD)("div",b,[(0,s._)("div",g,[(0,s._)("label",w,"SAD "+(0,l.zw)(e.$t("home.staking")),1)]),(0,s._)("div",f,[(0,s._)("label",v,(0,l.zw)(e.$t("hycFluidity.totalPledge")),1),(0,s._)("label",T,(0,l.zw)(I.totalPledge.toFixed(4))+" SAD",1)]),(0,s._)("div",C,[(0,s._)("label",_,(0,l.zw)(e.$t("sadFluidity.incomeRate")),1),(0,s._)("label",F,(0,l.zw)(I.rewardRate)+" %",1)]),(0,s._)("div",A,[(0,s._)("label",k,(0,l.zw)(e.$t("hycFluidity.myPledge")),1),(0,s._)("label",x,(0,l.zw)(I.myPledge.toFixed(4))+" SAD",1)]),(0,s._)("div",h,[(0,s.Wm)(a,{modelValue:I.pledgeNumber,"onUpdate:modelValue":t[0]||(t[0]=e=>I.pledgeNumber=e),placeholder:e.$t("hycFluidity.inputPlaceholder")},{button:(0,s.w5)((()=>[(0,s._)("div",{class:"gradient-label",onClick:H},(0,l.zw)(e.$t("hycFluidity.all")),1)])),_:1},8,["modelValue","placeholder"])]),(0,s._)("div",z,[(0,s._)("label",S,(0,l.zw)(e.$t("hycFluidity.availableBalance")),1),(0,s._)("label",M,(0,l.zw)(I.sadBalance.toFixed(4))+" SAD",1)]),(0,s._)("div",D,[(0,s._)("div",{class:"button-style button-font",style:(0,l.j5)(I.pledgeNumber>0?"opacity: 1;":"opacity: 0.5;"),onClick:Z},(0,l.zw)(e.$t("hycFluidity.pledge")),5)]),(0,s._)("div",$,[(0,s._)("label",P,(0,l.zw)(e.$t("hycFluidity.myIncome")),1),(0,s._)("label",N,(0,l.zw)(I.myIncome.toFixed(8))+" SAD",1)]),(0,s._)("div",B,[(0,s._)("div",{class:"button-style button-font item-button",style:(0,l.j5)(I.myPledge>0?"opacity: 1;":"opacity: 0.5;"),onClick:U},(0,l.zw)(e.$t("hycFluidity.quit")),5),(0,s._)("div",{class:"button-style button-font item-button",style:(0,l.j5)(I.myIncome>0?"opacity: 1;":"opacity: 0.5;"),onClick:W},(0,l.zw)(e.$t("hycFluidity.extract")),5)])])}}},R=a(89);const j=(0,R.Z)(I,[["__scopeId","data-v-480eae99"]]);var V=j},695:function(e){e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"amountMin","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')}}]);
//# sourceMappingURL=136.ee170f78.js.map