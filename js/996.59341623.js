"use strict";(self["webpackChunksad"]=self["webpackChunksad"]||[]).push([[996],{3996:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});a(3373);var n=a(9412),s=a.n(n),i=a(3396),o=a(7139),d=a(6172),p=a(4870),r=a(2483),l=JSON.parse('[{"inputs":[{"internalType":"address","name":"_sad","type":"address"},{"internalType":"address","name":"_recipient","type":"address"},{"internalType":"address","name":"_referral","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"applyNode","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"isNode","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"price","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"recipient","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"referral","outputs":[{"internalType":"contract Referral","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sad","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"setPrice","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_recipient","type":"address"}],"name":"setRecipient","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"total","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]'),c=a(695),u=a(6796),y=a(7647),b=a(5554),w=a(7071),f=a(6695);const m=e=>((0,i.dD)("data-v-cd07677c"),e=e(),(0,i.Cn)(),e),v={class:"box-style node-box"},C={class:"gradient-label-box"},_={class:"gradient-label"},N={class:"node-address-title"},g=m((()=>(0,i._)("img",{src:d,alt:""},null,-1))),A=[g],T={class:"address-info-box"},z={class:"address-info"},x={class:"box-style node-equity-box"},M={class:"gradient-label-box"},h={class:"gradient-label"},$={class:"applications-number"},D={class:"node-equity-title"},F={class:"node-equity-info-box"},k={class:"node-equity-info"},q={class:"apple-button-box"},O={key:0,class:"button-style apple-button-font",style:{opacity:"0.5"}};var E={__name:"ApplyNode",setup(e){const{proxy:t}=(0,i.FN)(),{toClipboard:a}=(0,w.Z)(),n=(0,r.yj)(),d=(0,p.qj)({nodeContractAddress:"0xdcDd8Fa73B21a265b5BDB933F55092E87caefEbc",nodeContract:null,sadContractAddress:"0xD795CaC8d9265A1f8c630b3f4F1C16EabaD2bFF7",sadContract:null,isNode:!1,total:0,price:0});(0,i.YP)((()=>n.account),(()=>{m()})),(0,i.bv)((async()=>{d.nodeContract=new u.CH(d.nodeContractAddress,l,t.$provider.getSigner()),d.sadContract=new u.CH(d.sadContractAddress,c,t.$provider.getSigner()),m()}));const m=async()=>{d.isNode=await d.nodeContract.isNode(n.account),d.total=await d.nodeContract.total();const e=await d.nodeContract.price();d.price=parseFloat(y.dF(e)),g()},g=async()=>{const e=await d.sadContract.allowance(n.account,d.nodeContractAddress);e.gt(y.fi(d.price.toString()))?n.isNodeAuthorize=!0:n.isNodeAuthorize=!1},E=async()=>{if(n.isNodeAuthorize){s().loading();const e=await d.nodeContract.applyNode();e.wait(),d.isNode=!0,d.total=parseInt(d.total)+1}else{s().loading();const e=await d.sadContract.approve(d.nodeContractAddress,b.Bz);e.wait(),n.isNodeAuthorize=!0,E()}},S=async()=>{try{await a(d.nodeContractAddress),s().success(f.Z.global.t("toast.copySuccess"))}catch(e){s().fail(f.Z.global.t("toast.copyFail"))}};return(e,t)=>((0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",v,[(0,i._)("div",C,[(0,i._)("label",_,(0,o.zw)(e.$t("home.applyNode")),1)]),(0,i._)("div",N,[(0,i._)("div",null,(0,o.zw)(e.$t("appleNode.nodeAddress")),1),(0,i._)("div",{onClick:S},A)]),(0,i._)("div",T,[(0,i._)("div",z,(0,o.zw)(d.nodeContractAddress),1)])]),(0,i._)("div",x,[(0,i._)("div",M,[(0,i._)("label",h,(0,o.zw)(d.total),1)]),(0,i._)("div",$,(0,o.zw)(e.$t("appleNode.applicationsNumber")),1),(0,i._)("div",D,(0,o.zw)(e.$t("appleNode.nodeEquity")),1),(0,i._)("div",F,[(0,i._)("div",k,(0,o.zw)(e.$t("appleNode.nodeEquityInfo")),1)]),(0,i._)("div",q,[d.isNode?((0,i.wg)(),(0,i.iD)("div",O,(0,o.zw)(e.$t("appleNode.alreadyApplied")),1)):((0,i.wg)(),(0,i.iD)("div",{key:1,class:"button-style apple-button-font",onClick:E},(0,o.zw)(e.$t("appleNode.apple"))+" ("+(0,o.zw)(e.$t("appleNode.pay"))+" "+(0,o.zw)(d.price)+" SAD) ",1))])])]))}},S=a(89);const B=(0,S.Z)(E,[["__scopeId","data-v-cd07677c"]]);var I=B}}]);
//# sourceMappingURL=996.59341623.js.map