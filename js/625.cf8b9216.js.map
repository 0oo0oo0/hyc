{"version":3,"file":"js/625.cf8b9216.js","mappings":"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","sources":["webpack://sad/./src/views/Account.vue","webpack://sad/./src/views/Account.vue?727f"],"sourcesContent":["<template>\n  <div>\n    <div class=\"box-style account-box\">\n      <div class=\"account-title-box\">\n        <div class=\"gradient-label-box\">\n          <label class=\"gradient-label\">{{ $t('topMenu.account') }}</label>\n        </div>\n        <!-- <div class=\"logout-box\"><img src=\"@/assets/account/logout.png\" alt=\"\"></div> -->\n      </div>\n      <div class=\"account-info-box\">\n        <div class=\"account-icon\"><img src=\"@/assets/account/account-logo.png\"\n               alt=\"\"></div>\n        <div class=\"account-info\">\n          <!-- <div class=\"account-style\">以太坊</div> -->\n          <div class=\"account-address\">{{ $filters.addressFormat(route.account) }}</div>\n        </div>\n        <div class=\"copy\"\n             @click=\"clickCopyAccount\">\n          <img src=\"@/assets/common/copy.png\"\n               alt=\"\">\n        </div>\n      </div>\n      <div class=\"account-balance-box\">\n        <div><img src=\"@/assets/account/hyc.png\"\n               alt=\"\"></div>\n        <div>{{ state.hycBalance.toFixed(4) }} HYC</div>\n      </div>\n      <div class=\"account-balance-box sad-balance-box\">\n        <div><img src=\"@/assets/account/sad.png\"\n               alt=\"\"></div>\n        <div>{{ state.sadBalance.toFixed(4) }} SAD</div>\n      </div>\n    </div>\n    <div class=\"box-style record-box\">\n      <van-tabs v-model:active=\"state.recordTitle\" background=\"#272B33\"\n                @click-tab=\"clickRecordTag\" line-height=\"0px\">\n        <van-tab v-for=\"item in state.recordList\" :key=\"item.title\" :name=\"item.title\">\n          <template #title>\n            <div :class=\"(state.recordTitle == item.title) ? state.recordTitleSelectStyle : state.recordTitleUnSelectStyle\">\n              {{ item.title }}\n            </div>\n          </template>\n          <div class=\"divider\"></div>\n          <van-list :loading=\"state.loading\" :finished=\"item.finished\"\n                    :loading-text=\"$t('account.loading')\"\n                    :finished-text=\"$t('account.noMore')\"\n                    @load=\"getRecordInfo(item)\">\n            <van-empty v-if=\"Object.keys(item.list).length == 0\"\n                       :image=\"state.noDataImage\"\n                       :image-size=\"[100, 98]\"\n                       :description=\"$t('account.noRecords')\" />\n            <div class=\"record-item-box\"\n                 v-for=\"record in item.list\"\n                 :key=\"record.id\">\n              <div>{{ record.title }}</div>\n              <div>{{ record.number }}</div>\n            </div>\n          </van-list>\n        </van-tab>\n      </van-tabs>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, onMounted, getCurrentInstance, watch } from 'vue';\nimport { useRoute } from 'vue-router';\nimport i18n from '@/i18n';\nimport useClipboard from 'vue-clipboard3'\nimport hyc from '@/json/hyc.json'\nimport sad from '@/json/sad.json'\nimport { ethers, utils } from 'ethers';\nimport { pledgeRecord, incomeRecord, withdrawRecord } from '@/utils/api'\nimport { Toast } from 'vant';\n\nconst { proxy } = getCurrentInstance()\nconst { toClipboard } = useClipboard()\nconst route = useRoute()\nconst state = reactive({\n  recordTitle: i18n.global.t('account.pledgeRecord'),\n  recordList: [\n    {\n      title: i18n.global.t('account.pledgeRecord'),\n      page: 0,\n      finished: false,\n      list: []\n    },\n    {\n      title: i18n.global.t('account.incomeRecord'),\n      page: 0,\n      finished: false,\n      list: []\n    },\n    {\n      title: i18n.global.t('account.withdrawRecord'),\n      page: 0,\n      finished: false,\n      list: []\n    }\n  ],\n  recordTitleSelectStyle: \"record-title-select-style\",\n  recordTitleUnSelectStyle: \"record-title-unselect-style\",\n\n  hycContractAddress: process.env.VUE_APP_HYC_CONTRACT_ADDRESS,\n  hycContract: null,\n  sadContractAddress: process.env.VUE_APP_SAD_CONTRACT_ADDRESS,\n  sadContract: null,\n\n  hycBalance: 0,\n  sadBalance: 0,\n\n  loading: true,\n  noDataImage: require('@/assets/common/no-data.png')\n})\n\nwatch(() => route.account, () => {\n  getBalance()\n  state.recordTitle = i18n.global.t('account.pledgeRecord')\n  state.recordList = [\n    {\n      title: i18n.global.t('account.pledgeRecord'),\n      page: 0,\n      finished: false,\n      list: []\n    },\n    {\n      title: i18n.global.t('account.incomeRecord'),\n      page: 0,\n      finished: false,\n      list: []\n    },\n    {\n      title: i18n.global.t('account.withdrawRecord'),\n      page: 0,\n      finished: false,\n      list: []\n    }\n  ]\n  getRecordInfo(state.recordList[0])\n})\nwatch(() => i18n.global.locale, () => {\n  state.recordList[0].title = i18n.global.t('account.pledgeRecord')\n  state.recordList[1].title = i18n.global.t('account.incomeRecord')\n  state.recordList[2].title = i18n.global.t('account.withdrawRecord')\n  for (const info of state.recordList[0].list) {\n    info.title = \"HYC \" + i18n.global.t('home.fluidity') + \"-\" + ((info.type == 1) ? i18n.global.t('hycFluidity.pledge') : i18n.global.t('account.release'))\n  }\n  for (const info of state.recordList[1].list) {\n    info.title = (info.type == 1) ? i18n.global.t('account.staticIncome') : i18n.global.t('account.dynamicIncome')\n  }\n  for (const info of state.recordList[2].list) {\n    info.title = i18n.global.t('hycFluidity.extract')\n  }\n})\nonMounted(async () => {\n  state.hycContract = new ethers.Contract(state.hycContractAddress, hyc, proxy.$provider.getSigner())\n  state.sadContract = new ethers.Contract(state.sadContractAddress, sad, proxy.$provider.getSigner())\n\n  getBalance()\n  getRecordInfo(state.recordList[0])\n})\n\nconst getBalance = (async () => {\n  const hycBalanceOf = await state.hycContract.balanceOf(route.account)\n  state.hycBalance = parseFloat(utils.formatEther(hycBalanceOf))\n  const sadBalanceOf = await state.sadContract.balanceOf(route.account)\n  state.sadBalance = parseFloat(utils.formatEther(sadBalanceOf))\n})\n\nconst getRecordInfo = (async (item) => {\n  if (state.recordTitle == state.recordList[0].title) {\n    const { data } = await pledgeRecord({\n      address: route.account,\n      per_page: 20,\n      page: parseInt(item.page) + 1\n    })\n    if (item.page == 0) {\n      item.list = []\n    }\n    item.page = parseInt(item.page) + 1\n    item.finished = Object.keys(data).length < 20\n    for (const info of data) {\n      const record = {\n        id: info.id,\n        title: \"HYC \" + i18n.global.t('home.fluidity') + \"-\" + ((info.type == 1) ? i18n.global.t('hycFluidity.pledge') : i18n.global.t('account.release')),\n        number: ((info.type == 1) ? (\"-\" + info.number) : (\"+\" + info.number)) + \" LP\"\n      }\n      item.list.push(record)\n    }\n    state.loading = false\n  } else if (state.recordTitle == state.recordList[1].title) {\n    const { data } = await incomeRecord({\n      address: route.account,\n      per_page: 20,\n      page: parseInt(item.page) + 1\n    })\n    if (item.page == 0) {\n      item.list = []\n    }\n    item.page = parseInt(item.page) + 1\n    item.finished = Object.keys(data).length < 20\n    for (const info of data) {\n      const record = {\n        id: info.id,\n        title: (info.type == 1) ? i18n.global.t('account.staticIncome') : i18n.global.t('account.dynamicIncome'),\n        number: \"+\" + info.number + \" HYC\"\n      }\n      item.list.push(record)\n    }\n    state.loading = false\n  } else {\n    const { data } = await withdrawRecord({\n      address: route.account,\n      per_page: 20,\n      page: parseInt(item.page) + 1\n    })\n    if (item.page == 0) {\n      item.list = []\n    }\n    item.page = parseInt(item.page) + 1\n    item.finished = Object.keys(data).length < 20\n    for (const info of data) {\n      const record = {\n        id: info.id,\n        title: i18n.global.t('hycFluidity.extract'),\n        number: \"+\" + info.number + \" HYC\"\n      }\n      item.list.push(record)\n    }\n    state.loading = false\n  }\n})\n\nconst clickCopyAccount = (async () => {\n  try {\n    await toClipboard(route.account)\n    Toast.success(i18n.global.t('toast.copySuccess'))\n  } catch (error) {\n    Toast.fail(i18n.global.t('toast.copyFail'))\n  }\n})\n\nconst clickRecordTag = ((item) => {\n  if (item.name != state.recordTitle) {\n    state.recordTitle = item.name\n    if (state.recordTitle == state.recordList[0].title) {\n      const record = state.recordList[0]\n      if (Object.keys(record.list).length == 0 && !item.finished) {\n        state.loading = true\n        getRecordInfo(record)\n      }\n    } else if (state.recordTitle == state.recordList[1].title) {\n      const record = state.recordList[1]\n      if (Object.keys(record.list).length == 0 && !item.finished) {\n        state.loading = true\n        getRecordInfo(record)\n      }\n    } else {\n      const record = state.recordList[2]\n      if (Object.keys(record.list).length == 0 && !item.finished) {\n        state.loading = true\n        getRecordInfo(record)\n      }\n    }\n  }\n})\n\n</script>\n\n<style lang=\"less\" scoped>\n@import '@/common/base.less';\n\n.account-box {\n  margin: 15px 15px 10px 15px;\n\n  .account-title-box {\n    margin: 0 15px;\n    display: flex;\n    justify-content: space-between;\n\n    img {\n      margin-top: 15.5px;\n      width: 24px;\n    }\n  }\n\n  .account-info-box {\n    margin: 15px;\n    border-radius: 10px;\n    border: 1px solid #373b44;\n    height: 72px;\n    display: flex;\n    justify-content: space-between;\n\n    .account-icon {\n      margin: 18px 15px 18px 10px;\n\n      img {\n        width: 36px;\n      }\n    }\n\n    .account-info {\n      margin: 15px 0;\n      width: calc(100% - 110px);\n      text-align: left;\n\n      .account-style {\n        .scw(@titleColorTwo, 14px, 400);\n      }\n\n      .account-address {\n        line-height: 36px;\n        .scw(@titleColorOne, 16px, 500);\n        font-family: PingFangSC-Medium, PingFang SC;\n      }\n    }\n\n    .copy {\n      margin: 24px 10px 24px 15px;\n\n      img {\n        width: 24px;\n      }\n    }\n  }\n\n  .account-balance-box {\n    margin: 0 15px 15px 15px;\n    height: 24px;\n    display: flex;\n    justify-content: space-between;\n\n    img {\n      width: 24px;\n    }\n\n    .scw(@titleColorOne, 14px, 400);\n    line-height: 24px;\n  }\n\n  .sad-balance-box {\n    padding-bottom: 15px;\n  }\n}\n\n.record-box {\n  margin: 0px 15px 10px 15px;\n\n  .van-tabs {\n    padding: 10px 0;\n\n    .record-title-select-style {\n      .scw(#F2F3F3, 14px, 600);\n      font-family: PingFangSC-Semibold, PingFang SC;\n      background: @gradientColorTwo;\n      -webkit-background-clip: text;\n      -webkit-text-fill-color: transparent;\n    }\n\n    .record-title-unselect-style {\n      .scw(@titleColorTwo, 14px, 600);\n      font-family: PingFangSC-Semibold, PingFang SC;\n    }\n\n    .divider {\n      margin: 10px 0;\n      height: 1px;\n      background: #2e3138;\n    }\n\n    .record-item-box {\n      margin: 0 15px 10px 15px;\n      .scw(@titleColorOne, 14px, 400);\n      display: flex;\n      justify-content: space-between;\n    }\n  }\n}\n</style>","import script from \"./Account.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Account.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Account.vue?vue&type=style&index=0&id=0b99f068&lang=less&scoped=true\"\n\nimport exportComponent from \"/Users/leonis/workspace/projects/hyc/hyc-web/sad/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0b99f068\"]])\n\nexport default __exports__"],"names":["proxy","getCurrentInstance","toClipboard","useClipboard","route","useRoute","state","reactive","recordTitle","i18n","recordList","title","page","finished","list","recordTitleSelectStyle","recordTitleUnSelectStyle","hycContractAddress","process","hycContract","sadContractAddress","sadContract","hycBalance","sadBalance","loading","noDataImage","require","watch","account","getBalance","getRecordInfo","info","type","onMounted","async","ethers","hyc","$provider","getSigner","sad","hycBalanceOf","balanceOf","parseFloat","utils","sadBalanceOf","data","pledgeRecord","address","per_page","parseInt","item","Object","keys","length","record","id","number","push","incomeRecord","withdrawRecord","clickCopyAccount","error","clickRecordTag","name","__exports__"],"sourceRoot":""}