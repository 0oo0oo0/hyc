"use strict";(self["webpackChunksad"]=self["webpackChunksad"]||[]).push([[514],{7647:function(e,t,n){n.d(t,{dF:function(){return T},fi:function(){return A}});n(1703);var a=n(6482),i=n(8737),l=n(675),r=n(2043);const s=new i.Yd(l.i),o={},d=r.O$.from(0),u=r.O$.from(-1);function c(e,t,n,a){const l={fault:t,operation:n};return void 0!==a&&(l.value=a),s.throwError(e,i.Yd.errors.NUMERIC_FAULT,l)}let p="0";while(p.length<256)p+=p;function m(e){if("number"!==typeof e)try{e=r.O$.from(e).toNumber()}catch(t){}return"number"===typeof e&&e>=0&&e<=256&&!(e%1)?"1"+p.substring(0,e):s.throwArgumentError("invalid decimal size","decimals",e)}function y(e,t){null==t&&(t=0);const n=m(t);e=r.O$.from(e);const a=e.lt(d);a&&(e=e.mul(u));let i=e.mod(n).toString();while(i.length<n.length-1)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const l=e.div(n).toString();return e=1===n.length?l:l+"."+i,a&&(e="-"+e),e}function f(e,t){null==t&&(t=0);const n=m(t);"string"===typeof e&&e.match(/^-?[0-9.]+$/)||s.throwArgumentError("invalid decimal value","value",e);const a="-"===e.substring(0,1);a&&(e=e.substring(1)),"."===e&&s.throwArgumentError("missing value","value",e);const i=e.split(".");i.length>2&&s.throwArgumentError("too many decimal points","value",e);let l=i[0],o=i[1];l||(l="0"),o||(o="0");while("0"===o[o.length-1])o=o.substring(0,o.length-1);o.length>n.length-1&&c("fractional component exceeds decimals","underflow","parseFixed"),""===o&&(o="0");while(o.length<n.length-1)o+="0";const d=r.O$.from(l),p=r.O$.from(o);let y=d.mul(n).add(p);return a&&(y=y.mul(u)),y}class g{constructor(e,t,n,a){e!==o&&s.throwError("cannot use FixedFormat constructor; use FixedFormat.from",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=n,this.decimals=a,this.name=(t?"":"u")+"fixed"+String(n)+"x"+String(a),this._multiplier=m(a),Object.freeze(this)}static from(e){if(e instanceof g)return e;"number"===typeof e&&(e=`fixed128x${e}`);let t=!0,n=128,a=18;if("string"===typeof e)if("fixed"===e);else if("ufixed"===e)t=!1;else{const i=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);i||s.throwArgumentError("invalid fixed format","format",e),t="u"!==i[1],n=parseInt(i[2]),a=parseInt(i[3])}else if(e){const i=(t,n,a)=>null==e[t]?a:(typeof e[t]!==n&&s.throwArgumentError("invalid fixed format ("+t+" not "+n+")","format."+t,e[t]),e[t]);t=i("signed","boolean",t),n=i("width","number",n),a=i("decimals","number",a)}return n%8&&s.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),a>80&&s.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",a),new g(o,t,n,a)}}class h{constructor(e,t,n,a){e!==o&&s.throwError("cannot use FixedNumber constructor; use FixedNumber.from",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=a,this._hex=t,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&s.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=f(this._value,this.format.decimals),n=f(e._value,e.format.decimals);return h.fromValue(t.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=f(this._value,this.format.decimals),n=f(e._value,e.format.decimals);return h.fromValue(t.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=f(this._value,this.format.decimals),n=f(e._value,e.format.decimals);return h.fromValue(t.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=f(this._value,this.format.decimals),n=f(e._value,e.format.decimals);return h.fromValue(t.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");1===e.length&&e.push("0");let t=h.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(t=t.subUnsafe(w.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");1===e.length&&e.push("0");let t=h.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(t=t.addUnsafe(w.toFormat(t.format))),t}round(e){null==e&&(e=0);const t=this.toString().split(".");if(1===t.length&&t.push("0"),(e<0||e>80||e%1)&&s.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const n=h.from("1"+p.substring(0,e),this.format),a=b.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(a).floor().divUnsafe(n)}isZero(){return"0.0"===this._value||"0"===this._value}isNegative(){return"-"===this._value[0]}toString(){return this._value}toHexString(e){if(null==e)return this._hex;e%8&&s.throwArgumentError("invalid byte width","width",e);const t=r.O$.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return(0,a.$m)(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return h.fromString(this._value,e)}static fromValue(e,t,n){return null!=n||null==t||(0,r.Zm)(t)||(n=t,t=null),null==t&&(t=0),null==n&&(n="fixed"),h.fromString(y(e,t),g.from(n))}static fromString(e,t){null==t&&(t="fixed");const n=g.from(t),i=f(e,n.decimals);!n.signed&&i.lt(d)&&c("unsigned value cannot be negative","overflow","value",e);let l=null;n.signed?l=i.toTwos(n.width).toHexString():(l=i.toHexString(),l=(0,a.$m)(l,n.width/8));const r=y(i,n.decimals);return new h(o,l,r,n)}static fromBytes(e,t){null==t&&(t="fixed");const n=g.from(t);if((0,a.lE)(e).length>n.width/8)throw new Error("overflow");let i=r.O$.from(e);n.signed&&(i=i.fromTwos(n.width));const l=i.toTwos((n.signed?0:1)+n.width).toHexString(),s=y(i,n.decimals);return new h(o,l,s,n)}static from(e,t){if("string"===typeof e)return h.fromString(e,t);if((0,a._t)(e))return h.fromBytes(e,t);try{return h.fromValue(e,0,t)}catch(n){if(n.code!==i.Yd.errors.INVALID_ARGUMENT)throw n}return s.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!(!e||!e._isFixedNumber)}}const w=h.from(1),b=h.from("0.5"),v="units/5.7.0",_=new i.Yd(v),x=["wei","kwei","mwei","gwei","szabo","finney","ether"];function F(e,t){if("string"===typeof t){const e=x.indexOf(t);-1!==e&&(t=3*e)}return y(e,null!=t?t:18)}function C(e,t){if("string"!==typeof e&&_.throwArgumentError("value must be a string","value",e),"string"===typeof t){const e=x.indexOf(t);-1!==e&&(t=3*e)}return f(e,null!=t?t:18)}function T(e){return F(e,18)}function A(e){return C(e,18)}},1514:function(e,t,n){n.r(t),n.d(t,{default:function(){return ie}});n(3373);var a=n(9412),i=n.n(a),l=n(3396),r=n(7139),s=n(4870),o=n(2483),d=n(9502),u=n(7905),c=n(6796),p=n(7647),m=n(5554),y=n(3007);const f={class:"box-style pledge-box"},g={class:"gradient-label-box"},h={class:"gradient-label"},w={class:"pledge-info-box"},b={class:"my-pledge"},v={class:"pledge-title"},_={class:"pledge-info"},x={class:"my-pledge"},F={class:"pledge-title"},C={class:"pledge-info"},T={class:"my-pledge"},A={class:"pledge-title"},z={class:"pledge-info"},S={class:"count-down"},$={class:"count-down-info"},k={class:"button-box"};var E={__name:"HYCPledge",props:{pledgeInfo:{}},emits:["quitPledge"],setup(e,{emit:t}){const n=e;(0,l.ic)((()=>{const e=Math.round(new Date/1e3),t=60*n.pledgeInfo.period;t-(e-n.pledgeInfo.start_time)>0?(a.value=1e3*(t-(e-n.pledgeInfo.start_time)),i.value.start()):(a.value=0,i.value.pause())}));const a=(0,s.iH)(0),i=(0,s.iH)(null),o=()=>{t("quitPledge")},d=()=>{a.value=0,i.value.pause()};return(e,t)=>{const s=(0,l.up)("van-count-down");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",f,[(0,l._)("div",g,[(0,l._)("label",h,"LP "+(0,r.zw)(e.$t("hycFluidity.pledge"))+"-"+(0,r.zw)(n.pledgeInfo.period)+" "+(0,r.zw)(e.$t("hycFluidity.day")),1)]),(0,l._)("div",w,[(0,l._)("div",b,[(0,l._)("label",v,(0,r.zw)(e.$t("hycFluidity.myPledge")),1),(0,l._)("label",_,(0,r.zw)(n.pledgeInfo.principal)+" LP",1)]),(0,l._)("div",x,[(0,l._)("label",F,(0,r.zw)(e.$t("hycFluidity.pledgeCycle")),1),(0,l._)("label",C,(0,r.zw)(n.pledgeInfo.period)+" "+(0,r.zw)(e.$t("hycFluidity.day")),1)]),(0,l._)("div",T,[(0,l._)("label",A,(0,r.zw)(e.$t("hycFluidity.myIncome")),1),(0,l._)("label",z,(0,r.zw)(n.pledgeInfo.profit)+" HYC",1)])]),(0,l._)("div",S,[(0,l.Wm)(s,{time:a.value,ref_key:"countDown",ref:i,onFinish:d},{default:(0,l.w5)((t=>[(0,l._)("div",$,(0,r.zw)(t.days)+(0,r.zw)(e.$t("hycFluidity.day"))+" "+(0,r.zw)(t.hours)+":"+(0,r.zw)(t.minutes)+":"+(0,r.zw)(t.seconds),1)])),_:1},8,["time"])]),(0,l._)("div",k,[(0,l._)("div",{class:"button-style button-font",style:(0,r.j5)(a.value>0?"opacity: 0.5;":"opacity: 1;"),onClick:o},(0,r.zw)(e.$t("hycFluidity.quit")),5)])])])}}},N=n(89);const P=(0,N.Z)(E,[["__scopeId","data-v-b13cafe6"]]);var I=P,H=n(6695);const O={class:"box-style mining-box"},U={class:"gradient-label-box"},Y={class:"gradient-label"},B={class:"total-pledge"},D={class:"pledge-title"},L={class:"pledge-info"},M={class:"my-pledge"},V={class:"pledge-title"},j={class:"pledge-info"},R={class:"input-box"},Z={class:"pledge-title pledge-cycle-title"},q=["onClick"],K={class:"available-balance"},W={class:"pledge-title"},Q={class:"pledge-info"},G={class:"button-box"},J={class:"available-balance"},X={class:"pledge-title"},ee={class:"pledge-info"},te={class:"button-box"};var ne={__name:"HYCFluidity",setup(e){const{proxy:t}=(0,l.FN)(),n=(0,o.yj)(),a=(0,s.iH)(0),f=(0,s.qj)({pledgeCycleList:[],pledgeCycle:0,pledgeCycleUnSelectStyle:{border:"1px solid #373B44"},pledgeCycleSelectStyle:{border:"1px solid #9EE4FF"},userInfo:{},pledgeNumber:0,stakingContractAddress:"0xf71c000794DC8A6463B7b331Ac0AF68e0FDd9b28",stakingContract:null,lpContractAddress:"0x73EF9e6d6E1eB00dda0ABE7310Df550C0a1AfdA2",lpContract:null,totalPledge:0,myPledge:0,lpBalance:0,pledgeList:[]});(0,l.YP)((()=>n.account),(()=>{F(),_(),x()})),(0,l.bv)((async()=>{f.stakingContract=new c.CH(f.stakingContractAddress,d,t.$provider.getSigner()),f.lpContract=new c.CH(f.lpContractAddress,u,t.$provider.getSigner()),g(),F(),w(),v(),_(),x()}));const g=()=>{a.value=window.setInterval((async()=>{v(),_(),x()}),3e3)},h=()=>{window.clearInterval(a.value)};(0,l.Ah)((()=>{h()}));const w=async()=>{const e=await f.stakingContract.periodCount();for(let t=0;t<e;t++){const e=await f.stakingContract.periods(t);f.pledgeCycleList.push(e)}f.pledgeCycleList.sort(((e,t)=>e-t))},b=async e=>{i().loading();const t=await f.stakingContract.exit(e.period);t.wait(),x()},v=async()=>{const e=await f.stakingContract.totalSupply();f.totalPledge=parseFloat(p.dF(e))},_=async()=>{const e=await f.stakingContract.balanceOf(n.account);f.myPledge=parseFloat(p.dF(e));const t=await f.lpContract.balanceOf(n.account);f.lpBalance=parseFloat(p.dF(t));const{data:a}=await(0,y.PR)({address:n.account});f.userInfo=a},x=async()=>{if(n.account){const{data:e}=await(0,y.Nv)({address:n.account});f.pledgeList=e}},F=async()=>{const e=await f.lpContract.allowance(n.account,f.stakingContractAddress);e.eq(m.Bz)?n.isSADHYCAuthorize=!0:n.isSADHYCAuthorize=!1},C=e=>{f.pledgeCycle=e},T=()=>{f.pledgeNumber=f.lpBalance},A=()=>{for(const e of f.pledgeList)if(e.period==f.pledgeCycle)return void i().fail(H.Z.global.t("toast.alreadyPledge"));f.pledgeNumber>f.lpBalance?i().fail(H.Z.global.t("toast.insufficientBalance")):parseFloat(f.pledgeNumber)>=1?z():i().fail(H.Z.global.t("toast.inputError"))},z=async()=>{if(n.isSADHYCAuthorize){i().loading();const e=await f.stakingContract.stake(p.fi(f.pledgeNumber.toString()),f.pledgeCycle);e.wait(),f.pledgeCycle=0,f.pledgeNumber=0,v(),_()}else{i().loading();const e=await f.lpContract.approve(f.stakingContractAddress,m.Bz);e.wait(),n.isSADHYCAuthorize=!0,z()}},S=async()=>{if(f.userInfo.hyc>0){i().loading();const{data:e}=await(0,y.Kl)({address:n.account});i().loading();const t=await f.stakingContract.withdraw(e.address,e.amount,e.deadline,e.sign);t.wait(),_()}};return(e,t)=>{const n=(0,l.up)("van-field"),a=(0,l.up)("van-col"),i=(0,l.up)("van-row");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",O,[(0,l._)("div",U,[(0,l._)("label",Y,"HYC "+(0,r.zw)(e.$t("home.fluidity")),1)]),(0,l._)("div",B,[(0,l._)("label",D,(0,r.zw)(e.$t("hycFluidity.totalPledge")),1),(0,l._)("label",L,(0,r.zw)(f.totalPledge.toFixed(4))+" LP",1)]),(0,l._)("div",M,[(0,l._)("label",V,(0,r.zw)(e.$t("hycFluidity.myPledge")),1),(0,l._)("label",j,(0,r.zw)(f.myPledge.toFixed(4))+" LP",1)]),(0,l._)("div",R,[(0,l.Wm)(n,{modelValue:f.pledgeNumber,"onUpdate:modelValue":t[0]||(t[0]=e=>f.pledgeNumber=e),placeholder:e.$t("hycFluidity.inputPlaceholder")},{button:(0,l.w5)((()=>[(0,l._)("div",{class:"gradient-label",onClick:T},(0,r.zw)(e.$t("hycFluidity.all")),1)])),_:1},8,["modelValue","placeholder"])]),(0,l._)("div",Z,(0,r.zw)(e.$t("hycFluidity.pledgeCycle")),1),(0,l.Wm)(i,{gutter:"10"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.pledgeCycleList,(t=>((0,l.wg)(),(0,l.j4)(a,{span:"8",key:t},{default:(0,l.w5)((()=>[(0,l._)("div",{class:"pledge-cycle",style:(0,r.j5)(f.pledgeCycle==t?f.pledgeCycleSelectStyle:f.pledgeCycleUnSelectStyle),onClick:e=>C(t)},(0,r.zw)(t)+" "+(0,r.zw)(e.$t("hycFluidity.day")),13,q)])),_:2},1024)))),128))])),_:1}),(0,l._)("div",K,[(0,l._)("label",W,(0,r.zw)(e.$t("hycFluidity.availableBalance")),1),(0,l._)("label",Q,(0,r.zw)(f.lpBalance.toFixed(4))+" LP",1)]),(0,l._)("div",G,[(0,l._)("div",{class:"button-style button-font",style:(0,r.j5)(0==f.pledgeCycle?"opacity: 0.5;":"opacity: 1;"),onClick:A},(0,r.zw)(e.$t("hycFluidity.pledge")),5)]),(0,l._)("div",J,[(0,l._)("label",X,(0,r.zw)(e.$t("hycFluidity.withdrawableBalance")),1),(0,l._)("label",ee,(0,r.zw)(f.userInfo.hyc??0)+" HYC",1)]),(0,l._)("div",te,[(0,l._)("div",{class:"button-style button-font",style:(0,r.j5)(f.userInfo.hyc>0?"opacity: 1;":"opacity: 0.5;"),onClick:S},(0,r.zw)(e.$t("hycFluidity.extract")),5)])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.pledgeList,(e=>((0,l.wg)(),(0,l.j4)(I,{key:e.id,pledgeInfo:e,onQuitPledge:t=>b(e)},null,8,["pledgeInfo","onQuitPledge"])))),128))],64)}}};const ae=(0,N.Z)(ne,[["__scopeId","data-v-251300b8"]]);var ie=ae},7905:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"uint256","name":"totalSupply","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')}}]);
//# sourceMappingURL=514.e1ddde2c.js.map