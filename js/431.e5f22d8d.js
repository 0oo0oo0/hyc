"use strict";(self["webpackChunksad"]=self["webpackChunksad"]||[]).push([[431],{7431:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});a(3373);var n=a(9412),l=a.n(n),i=a(3396),s=a(7139),o=a(4870),p=a(2483),d=a(9147),r=a(7905),u=a(6796),y=a(7647),c=a(5554),m=a(6695);const b={class:"box-style fluidity-box"},g={class:"gradient-label-box"},w={class:"gradient-label"},f={class:"total-pledge"},v={class:"pledge-title"},T={class:"pledge-info"},_={class:"income-rate"},C={class:"pledge-title"},F={class:"pledge-info"},A={class:"income-rate"},x={class:"pledge-title"},k={class:"pledge-info"},h={class:"input-box"},z={class:"income-rate"},S={class:"pledge-title"},P={class:"pledge-info"},D={class:"button-box"},$={class:"my-income"},M={class:"pledge-title"},B={class:"pledge-info"},N={class:"button-box function-button-box"};var I={__name:"SADFluidity",setup(e){const{proxy:t}=(0,i.FN)(),a=(0,p.yj)(),n=(0,o.iH)(0),I=(0,o.qj)({stakingContractAddress:"0x5b6020703Aa79703674C14Ea25286e368A440fd1",stakingContract:null,lpContractAddress:"0x13DdD8B83F44C7BeE11E894E28699C9d2145bA9A",lpContract:null,totalPledge:0,rewardRate:0,myPledge:0,lpBalance:0,myIncome:0,pledgeNumber:0});(0,i.YP)((()=>a.account),(()=>{O(),V()})),(0,i.bv)((async()=>{I.stakingContract=new u.CH(I.stakingContractAddress,d,t.$provider.getSigner()),I.lpContract=new u.CH(I.lpContractAddress,r,t.$provider.getSigner()),R(),O(),U(),E(),V()}));const R=()=>{n.value=window.setInterval((async()=>{E(),V()}),3e3)},j=()=>{window.clearInterval(n.value)};(0,i.Ah)((()=>{j()}));const E=async()=>{const e=await I.stakingContract.lp_totalSupply();I.totalPledge=parseFloat(y.dF(e))},U=async()=>{const e=await I.stakingContract.lp_rewardRate();I.rewardRate=e/100},V=async()=>{const e=await I.stakingContract.lp_balanceOf(a.account);I.myPledge=parseFloat(y.dF(e));const t=await I.lpContract.balanceOf(a.account);I.lpBalance=parseFloat(y.dF(t));const n=await I.stakingContract.lp_rewards(a.account);I.myIncome=parseFloat(y.dF(n))},O=async()=>{const e=await I.lpContract.allowance(a.account,I.stakingContractAddress);e.eq(c.Bz)?a.isSADUSDTAuthorize=!0:a.isSADUSDTAuthorize=!1},q=()=>{I.pledgeNumber=I.lpBalance},H=async()=>{I.pledgeNumber>I.lpBalance?l().fail(m.Z.global.t("toast.insufficientBalance")):parseFloat(I.pledgeNumber)>0?L():l().fail(m.Z.global.t("toast.inputError"))},L=async()=>{if(a.isSADUSDTAuthorize){l().loading();const e=await I.stakingContract.lp_stake(y.fi(I.pledgeNumber.toString()));e.wait(),I.pledgeNumber=0,E(),V()}else{l().loading();const e=await I.lpContract.approve(I.stakingContractAddress,c.Bz);e.wait(),a.isSADUSDTAuthorize=!0,L()}},Z=async()=>{if(I.myPledge>0){l().loading();const e=await I.stakingContract.lp_exit();e.wait()}},J=async()=>{if(I.myIncome>0){l().loading();const e=await I.stakingContract.lp_getReward();e.wait(),V()}};return(e,t)=>{const a=(0,i.up)("van-field");return(0,i.wg)(),(0,i.iD)("div",b,[(0,i._)("div",g,[(0,i._)("label",w,"SAD "+(0,s.zw)(e.$t("home.fluidity")),1)]),(0,i._)("div",f,[(0,i._)("label",v,(0,s.zw)(e.$t("hycFluidity.totalPledge")),1),(0,i._)("label",T,(0,s.zw)(I.totalPledge.toFixed(4))+" LP",1)]),(0,i._)("div",_,[(0,i._)("label",C,(0,s.zw)(e.$t("sadFluidity.incomeRate")),1),(0,i._)("label",F,(0,s.zw)(I.rewardRate)+" %",1)]),(0,i._)("div",A,[(0,i._)("label",x,(0,s.zw)(e.$t("hycFluidity.myPledge")),1),(0,i._)("label",k,(0,s.zw)(I.myPledge.toFixed(4))+" LP",1)]),(0,i._)("div",h,[(0,i.Wm)(a,{modelValue:I.pledgeNumber,"onUpdate:modelValue":t[0]||(t[0]=e=>I.pledgeNumber=e),placeholder:e.$t("hycFluidity.inputPlaceholder")},{button:(0,i.w5)((()=>[(0,i._)("div",{class:"gradient-label",onClick:q},(0,s.zw)(e.$t("hycFluidity.all")),1)])),_:1},8,["modelValue","placeholder"])]),(0,i._)("div",z,[(0,i._)("label",S,(0,s.zw)(e.$t("hycFluidity.availableBalance")),1),(0,i._)("label",P,(0,s.zw)(I.lpBalance.toFixed(4))+" LP",1)]),(0,i._)("div",D,[(0,i._)("div",{class:"button-style button-font",style:(0,s.j5)(I.pledgeNumber>0?"opacity: 1;":"opacity: 0.5;"),onClick:H},(0,s.zw)(e.$t("hycFluidity.pledge")),5)]),(0,i._)("div",$,[(0,i._)("label",M,(0,s.zw)(e.$t("hycFluidity.myIncome")),1),(0,i._)("label",B,(0,s.zw)(I.myIncome.toFixed(8))+" SAD",1)]),(0,i._)("div",N,[(0,i._)("div",{class:"button-style button-font item-button",style:(0,s.j5)(I.myPledge>0?"opacity: 1;":"opacity: 0.5;"),onClick:Z},(0,s.zw)(e.$t("hycFluidity.quit")),5),(0,i._)("div",{class:"button-style button-font item-button",style:(0,s.j5)(I.myIncome>0?"opacity: 1;":"opacity: 0.5;"),onClick:J},(0,s.zw)(e.$t("hycFluidity.extract")),5)])])}}},R=a(89);const j=(0,R.Z)(I,[["__scopeId","data-v-3050ef36"]]);var E=j},7905:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"uint256","name":"totalSupply","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')}}]);
//# sourceMappingURL=431.e5f22d8d.js.map